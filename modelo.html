<svg viewBox="0 0 1600 1200" xmlns="http://www.w3.org/2000/svg">
  <!-- Definir estilos -->
  <defs>
    <style>
      .entity { fill: #E6F3FF; stroke: #2563EB; stroke-width: 2; }
      .weak-entity { fill: #FFF2E6; stroke: #EA580C; stroke-width: 2; stroke-dasharray: 5,5; }
      .attribute { fill: #F0FDF4; stroke: #16A34A; stroke-width: 1.5; }
      .key-attribute { fill: #FEF3C7; stroke: #D97706; stroke-width: 2; }
      .relationship { fill: #FDF2F8; stroke: #DB2777; stroke-width: 2; }
      .text { font-family: Arial, sans-serif; font-size: 10px; text-anchor: middle; dominant-baseline: middle; }
      .small-text { font-family: Arial, sans-serif; font-size: 8px; text-anchor: middle; dominant-baseline: middle; }
      .tiny-text { font-family: Arial, sans-serif; font-size: 7px; text-anchor: middle; dominant-baseline: middle; }
      .line { stroke: #374151; stroke-width: 1.2; fill: none; }
      .cardinality { font-family: Arial, sans-serif; font-size: 9px; font-weight: bold; fill: #1F2937; }
      .title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; text-anchor: middle; }
      .section-title { font-family: Arial, sans-serif; font-size: 11px; font-weight: bold; fill: #4F46E5; }
    </style>
  </defs>

  <!-- Título principal -->
  <text x="800" y="25" class="title">Modelo Entidad-Relación - Sistema Integral de Gentrificación Urbana</text>

  <!-- Sección 1: Entidades Core (Superior) -->
  <text x="400" y="60" class="section-title">ENTIDADES PRINCIPALES</text>

  <!-- ENTIDAD: BARRIOS (central superior) -->
  <rect x="320" y="80" width="120" height="70" class="entity"/>
  <text x="380" y="115" class="text" style="font-weight: bold;">BARRIOS</text>

  <!-- Atributos de BARRIOS -->
  <ellipse cx="260" cy="60" rx="25" ry="12" class="key-attribute"/>
  <text x="260" y="60" class="tiny-text">id (PK)</text>
  <line x1="285" y1="65" x2="320" y2="90" class="line"/>

  <ellipse cx="320" cy="45" rx="25" ry="12" class="attribute"/>
  <text x="320" y="45" class="tiny-text">nombre</text>
  <line x1="330" y1="57" x2="350" y2="80" class="line"/>

  <ellipse cx="380" cy="40" rx="25" ry="12" class="attribute"/>
  <text x="380" y="40" class="tiny-text">distrito</text>
  <line x1="380" y1="52" x2="380" y2="80" class="line"/>

  <ellipse cx="440" cy="45" rx="30" ry="12" class="attribute"/>
  <text x="440" y="45" class="tiny-text">poblacion</text>
  <line x1="420" y1="52" x2="400" y2="80" class="line"/>

  <ellipse cx="500" cy="60" rx="15" ry="10" class="attribute"/>
  <text x="500" y="60" class="tiny-text">lat</text>
  <line x1="485" y1="65" x2="440" y2="90" class="line"/>

  <ellipse cx="500" cy="85" rx="15" ry="10" class="attribute"/>
  <text x="500" y="85" class="tiny-text">lng</text>
  <line x1="485" y1="85" x2="440" y2="110" class="line"/>

  <!-- ENTIDAD: EDIFICIOS -->
  <rect x="80" y="80" width="120" height="70" class="entity"/>
  <text x="140" y="115" class="text" style="font-weight: bold;">EDIFICIOS</text>

  <!-- Atributos de EDIFICIOS -->
  <ellipse cx="50" cy="50" rx="20" ry="10" class="key-attribute"/>
  <text x="50" y="50" class="tiny-text">id (PK)</text>
  <line x1="70" y1="55" x2="80" y2="90" class="line"/>

  <ellipse cx="100" cy="35" rx="25" ry="10" class="attribute"/>
  <text x="100" y="35" class="tiny-text">nombre</text>
  <line x1="110" y1="45" x2="120" y2="80" class="line"/>

  <ellipse cx="160" cy="30" rx="30" ry="10" class="attribute"/>
  <text x="160" y="30" class="tiny-text">direccion</text>
  <line x1="150" y1="40" x2="140" y2="80" class="line"/>

  <ellipse cx="220" cy="50" rx="35" ry="10" class="attribute"/>
  <text x="220" y="50" class="tiny-text">año_construccion</text>
  <line x1="200" y1="55" x2="180" y2="90" class="line"/>

  <!-- RELACIÓN: Pertenece -->
  <polygon points="230,115 260,105 290,115 260,125" class="relationship"/>
  <text x="260" y="115" class="tiny-text">Pertenece</text>
  
  <!-- Líneas de relación EDIFICIOS-BARRIOS -->
  <line x1="200" y1="115" x2="230" y2="115" class="line"/>
  <line x1="290" y1="115" x2="320" y2="115" class="line"/>
  
  <!-- Cardinalidades -->
  <text x="215" y="108" class="cardinality">N</text>
  <text x="305" y="108" class="cardinality">1</text>

  <!-- ENTIDAD: PRECIOS_VIVIENDA -->
  <rect x="520" y="80" width="140" height="70" class="entity"/>
  <text x="590" y="115" class="text" style="font-weight: bold;">PRECIOS_VIVIENDA</text>

  <!-- Atributos de PRECIOS_VIVIENDA -->
  <ellipse cx="480" cy="50" rx="20" ry="10" class="key-attribute"/>
  <text x="480" y="50" class="tiny-text">id (PK)</text>
  <line x1="500" y1="55" x2="520" y2="90" class="line"/>

  <ellipse cx="540" cy="35" rx="20" ry="10" class="attribute"/>
  <text x="540" y="35" class="tiny-text">anio</text>
  <line x1="550" y1="45" x2="560" y2="80" class="line"/>

  <ellipse cx="590" cy="30" rx="35" ry="10" class="attribute"/>
  <text x="590" y="30" class="tiny-text">precio_promedio</text>
  <line x1="590" y1="40" x2="590" y2="80" class="line"/>

  <ellipse cx="640" cy="35" rx="20" ry="10" class="attribute"/>
  <text x="640" y="35" class="tiny-text">tipo</text>
  <line x1="630" y1="45" x2="620" y2="80" class="line"/>

  <!-- RELACIÓN: Tiene Precios -->
  <polygon points="470,115 500,105 530,115 500,125" class="relationship"/>
  <text x="500" y="115" class="tiny-text">Tiene Precios</text>

  <!-- Líneas de relación BARRIOS-PRECIOS -->
  <line x1="440" y1="115" x2="470" y2="115" class="line"/>
  <line x1="530" y1="115" x2="520" y2="115" class="line"/>
  
  <!-- Cardinalidades -->
  <text x="455" y="108" class="cardinality">1</text>
  <text x="535" y="108" class="cardinality">N</text>

  <!-- Sección 2: Entidades de Análisis (Medio) -->
  <text x="400" y="220" class="section-title">ENTIDADES DE ANÁLISIS SOCIAL</text>

  <!-- ENTIDAD: NEGOCIOS_LOCALES -->
  <rect x="80" y="240" width="140" height="70" class="entity"/>
  <text x="150" y="275" class="text" style="font-weight: bold;">NEGOCIOS_LOCALES</text>

  <!-- Atributos de NEGOCIOS_LOCALES -->
  <ellipse cx="40" cy="210" rx="20" ry="10" class="key-attribute"/>
  <text x="40" y="210" class="tiny-text">id (PK)</text>
  <line x1="60" y1="215" x2="80" y2="250" class="line"/>

  <ellipse cx="100" cy="195" rx="25" ry="10" class="attribute"/>
  <text x="100" y="195" class="tiny-text">nombre</text>
  <line x1="110" y1="205" x2="120" y2="240" class="line"/>

  <ellipse cx="160" cy="190" rx="20" ry="10" class="attribute"/>
  <text x="160" y="190" class="tiny-text">tipo</text>
  <line x1="155" y1="200" x2="150" y2="240" class="line"/>

  <ellipse cx="220" cy="210" rx="35" ry="10" class="attribute"/>
  <text x="220" y="210" class="tiny-text">año_apertura</text>
  <line x1="200" y1="215" x2="180" y2="250" class="line"/>

  <!-- RELACIÓN: Ubicado en -->
  <polygon points="250,275 280,265 310,275 280,285" class="relationship"/>
  <text x="280" y="275" class="tiny-text">Ubicado en</text>

  <!-- Líneas de relación NEGOCIOS-BARRIOS -->
  <line x1="220" y1="275" x2="250" y2="275" class="line"/>
  <line x1="310" y1="275" x2="350" y2="190" class="line"/>
  
  <!-- Cardinalidades -->
  <text x="235" y="268" class="cardinality">N</text>
  <text x="340" y="200" class="cardinality">1</text>

  <!-- ENTIDAD: EVENTOS_DESPLAZAMIENTO -->
  <rect x="520" y="240" width="160" height="70" class="entity"/>
  <text x="600" y="275" class="text" style="font-weight: bold;">EVENTOS_DESPLAZAMIENTO</text>

  <!-- Atributos de EVENTOS_DESPLAZAMIENTO -->
  <ellipse cx="480" cy="210" rx="20" ry="10" class="key-attribute"/>
  <text x="480" y="210" class="tiny-text">id (PK)</text>
  <line x1="500" y1="215" x2="520" y2="250" class="line"/>

  <ellipse cx="540" cy="195" rx="20" ry="10" class="attribute"/>
  <text x="540" y="195" class="tiny-text">año</text>
  <line x1="545" y1="205" x2="550" y2="240" class="line"/>

  <ellipse cx="600" cy="185" rx="45" ry="10" class="attribute"/>
  <text x="600" y="185" class="tiny-text">personas_desplazadas</text>
  <line x1="600" y1="195" x2="600" y2="240" class="line"/>

  <ellipse cx="660" cy="195" rx="25" ry="10" class="attribute"/>
  <text x="660" y="195" class="tiny-text">causa</text>
  <line x1="650" y1="205" x2="640" y2="240" class="line"/>

  <!-- RELACIÓN: Registra -->
  <polygon points="470,275 500,265 530,275 500,285" class="relationship"/>
  <text x="500" y="275" class="tiny-text">Registra</text>

  <!-- Líneas de relación BARRIOS-EVENTOS -->
  <line x1="420" y1="150" x2="420" y2="200" class="line"/>
  <line x1="420" y1="200" x2="470" y2="275" class="line"/>
  <line x1="530" y1="275" x2="520" y2="275" class="line"/>
  
  <!-- Cardinalidades -->
  <text x="425" y="180" class="cardinality">1</text>
  <text x="535" y="268" class="cardinality">N</text>

  <!-- ENTIDAD: SEGREGACION_SOCIAL -->
  <rect x="280" y="320" width="140" height="70" class="entity"/>
  <text x="350" y="355" class="text" style="font-weight: bold;">SEGREGACION_SOCIAL</text>

  <!-- Atributos de SEGREGACION_SOCIAL (simplificados) -->
  <ellipse cx="240" cy="290" rx="20" ry="10" class="key-attribute"/>
  <text x="240" y="290" class="tiny-text">id (PK)</text>
  <line x1="260" y1="295" x2="280" y2="330" class="line"/>

  <ellipse cx="200" cy="330" rx="25" ry="10" class="attribute"/>
  <text x="200" y="330" class="tiny-text">barrio</text>
  <line x1="225" y1="335" x2="280" y2="345" class="line"/>

  <ellipse cx="180" cy="370" rx="40" ry="10" class="attribute"/>
  <text x="180" y="370" class="tiny-text">%_desplazados</text>
  <line x1="220" y1="365" x2="280" y2="355" class="line"/>

  <ellipse cx="460" cy="290" rx="40" ry="10" class="attribute"/>
  <text x="460" y="290" class="tiny-text">indice_diversidad</text>
  <line x1="440" y1="295" x2="420" y2="330" class="line"/>

  <ellipse cx="480" cy="330" rx="35" ry="10" class="attribute"/>
  <text x="480" y="330" class="tiny-text">ingreso_prom</text>
  <line x1="465" y1="335" x2="420" y2="345" class="line"/>

  <!-- RELACIÓN: Caracteriza -->
  <polygon points="350,240 380,230 410,240 380,250" class="relationship"/>
  <text x="380" y="240" class="tiny-text">Caracteriza</text>

  <!-- Líneas de relación BARRIOS-SEGREGACION -->
  <line x1="380" y1="150" x2="380" y2="230" class="line"/>
  <line x1="380" y1="250" x2="350" y2="320" class="line"/>
  
  <!-- Cardinalidades -->
  <text x="385" y="190" class="cardinality">1</text>
  <text x="365" y="300" class="cardinality">1</text>

  <!-- Sección 3: Entidades Extendidas (Inferior) -->
  <text x="400" y="450" class="section-title">ENTIDADES DE DESPLAZAMIENTO GEOGRÁFICO</text>

  <!-- ENTIDAD: DESPLAZAMIENTO_BARRIOS -->
  <rect x="120" y="480" width="160" height="70" class="entity"/>
  <text x="200" y="515" class="text" style="font-weight: bold;">DESPLAZAMIENTO_BARRIOS</text>

  <!-- Atributos principales -->
  <ellipse cx="80" cy="450" rx="20" ry="10" class="key-attribute"/>
  <text x="80" y="450" class="tiny-text">id (PK)</text>
  <line x1="100" y1="455" x2="120" y2="490" class="line"/>

  <ellipse cx="140" cy="430" rx="25" ry="10" class="attribute"/>
  <text x="140" y="430" class="tiny-text">barrio</text>
  <line x1="150" y1="440" x2="160" y2="480" class="line"/>

  <ellipse cx="200" cy="420" rx="20" ry="10" class="attribute"/>
  <text x="200" y="420" class="tiny-text">anio</text>
  <line x1="200" y1="430" x2="200" y2="480" class="line"/>

  <ellipse cx="260" cy="430" rx="45" ry="10" class="attribute"/>
  <text x="260" y="430" class="tiny-text">personas_desplazadas</text>
  <line x1="240" y1="440" x2="220" y2="480" class="line"/>

  <ellipse cx="100" cy="580" rx="25" ry="10" class="attribute"/>
  <text x="100" y="580" class="tiny-text">motivo</text>
  <line x1="115" y1="570" x2="140" y2="550" class="line"/>

  <ellipse cx="200" cy="590" rx="35" ry="10" class="attribute"/>
  <text x="200" y="590" class="tiny-text">nuevo_destino</text>
  <line x1="200" y1="580" x2="200" y2="550" class="line"/>

  <!-- ENTIDAD: DESPLAZAMIENTO_ZONAS_COSTERAS -->
  <rect x="400" y="480" width="180" height="70" class="entity"/>
  <text x="490" y="515" class="text" style="font-weight: bold;">DESPLAZAMIENTO_ZONAS_COSTERAS</text>

  <!-- Atributos principales -->
  <ellipse cx="360" cy="450" rx="20" ry="10" class="key-attribute"/>
  <text x="360" y="450" class="tiny-text">id (PK)</text>
  <line x1="380" y1="455" x2="400" y2="490" class="line"/>

  <ellipse cx="420" cy="430" rx="20" ry="10" class="attribute"/>
  <text x="420" y="430" class="tiny-text">zona</text>
  <line x1="430" y1="440" x2="440" y2="480" class="line"/>

  <ellipse cx="490" cy="420" rx="20" ry="10" class="attribute"/>
  <text x="490" y="420" class="tiny-text">anio</text>
  <line x1="490" y1="430" x2="490" y2="480" class="line"/>

  <ellipse cx="560" cy="430" rx="45" ry="10" class="attribute"/>
  <text x="560" y="430" class="tiny-text">personas_desplazadas</text>
  <line x1="540" y1="440" x2="520" y2="480" class="line"/>

  <ellipse cx="400" cy="590" rx="25" ry="10" class="attribute"/>
  <text x="400" y="590" class="tiny-text">motivo</text>
  <line x1="415" y1="580" x2="440" y2="550" class="line"/>

  <ellipse cx="500" cy="590" rx="35" ry="10" class="attribute"/>
  <text x="500" y="590" class="tiny-text">nuevo_destino</text>
  <line x1="500" y1="580" x2="490" y2="550" class="line"/>

  <!-- ENTIDAD: ZONAS_GENTRIFICACION -->
  <rect x="700" y="480" width="140" height="70" class="entity"/>
  <text x="770" y="515" class="text" style="font-weight: bold;">ZONAS_GENTRIFICACION</text>

  <!-- Atributos principales -->
  <ellipse cx="660" cy="450" rx="20" ry="10" class="key-attribute"/>
  <text x="660" y="450" class="tiny-text">id (PK)</text>
  <line x1="680" y1="455" x2="700" y2="490" class="line"/>

  <ellipse cx="720" cy="430" rx="20" ry="10" class="attribute"/>
  <text x="720" y="430" class="tiny-text">zona</text>
  <line x1="730" y1="440" x2="740" y2="480" class="line"/>

  <ellipse cx="790" cy="420" rx="35" ry="10" class="attribute"/>
  <text x="790" y="420" class="tiny-text">anio_inicio</text>
  <line x1="780" y1="430" x2="770" y2="480" class="line"/>

  <ellipse cx="770" cy="590" rx="35" ry="10" class="attribute"/>
  <text x="770" y="590" class="tiny-text">descripcion</text>
  <line x1="770" y1="580" x2="770" y2="550" class="line"/>

  <!-- Sección 4: Entidades Culturales -->
  <text x="400" y="680" class="section-title">ENTIDADES DE IMPACTO CULTURAL</text>

  <!-- ENTIDAD: IDENTIDAD_CULTURAL_AFECTADA -->
  <rect x="300" y="720" width="180" height="70" class="entity"/>
  <text x="390" y="755" class="text" style="font-weight: bold;">IDENTIDAD_CULTURAL_AFECTADA</text>

  <!-- Atributos principales -->
  <ellipse cx="260" cy="690" rx="20" ry="10" class="key-attribute"/>
  <text x="260" y="690" class="tiny-text">id (PK)</text>
  <line x1="280" y1="695" x2="300" y2="730" class="line"/>

  <ellipse cx="320" cy="670" rx="20" ry="10" class="attribute"/>
  <text x="320" y="670" class="tiny-text">lugar</text>
  <line x1="330" y1="680" x2="340" y2="720" class="line"/>

  <ellipse cx="390" cy="660" rx="40" ry="10" class="attribute"/>
  <text x="390" y="660" class="tiny-text">manifestaciones</text>
  <line x1="390" y1="670" x2="390" y2="720" class="line"/>

  <ellipse cx="460" cy="670" rx="25" ry="10" class="attribute"/>
  <text x="460" y="670" class="tiny-text">causa</text>
  <line x1="450" y1="680" x2="440" y2="720" class="line"/>

  <ellipse cx="390" cy="830" rx="35" ry="10" class="attribute"/>
  <text x="390" y="830" class="tiny-text">observaciones</text>
  <line x1="390" y1="820" x2="390" y2="790" class="line"/>

  <!-- ENTIDAD: MENSAJES_CHAT (Sistema) -->
  <rect x="600" y="720" width="120" height="70" class="entity"/>
  <text x="660" y="755" class="text" style="font-weight: bold;">MENSAJES_CHAT</text>

  <!-- Atributos principales -->
  <ellipse cx="560" cy="690" rx="20" ry="10" class="key-attribute"/>
  <text x="560" y="690" class="tiny-text">id (PK)</text>
  <line x1="580" y1="695" x2="600" y2="730" class="line"/>

  <ellipse cx="620" cy="670" rx="25" ry="10" class="attribute"/>
  <text x="620" y="670" class="tiny-text">usuario</text>
  <line x1="630" y1="680" x2="640" y2="720" class="line"/>

  <ellipse cx="680" cy="670" rx="25" ry="10" class="attribute"/>
  <text x="680" y="670" class="tiny-text">mensaje</text>
  <line x1="670" y1="680" x2="660" y2="720" class="line"/>

  <ellipse cx="660" cy="830" rx="20" ry="10" class="attribute"/>
  <text x="660" y="830" class="tiny-text">fecha</text>
  <line x1="660" y1="820" x2="660" y2="790" class="line"/>

  <!-- Relaciones entre entidades de desplazamiento -->
  <text x="330" y="610" class="tiny-text" style="fill: #6B7280;">Ambas entidades registran desplazamientos</text>
  <text x="330" y="625" class="tiny-text" style="fill: #6B7280;">en diferentes contextos geográficos</text>

  <!-- Leyenda mejorada -->
  <g transform="translate(1050, 80)">
    <text x="0" y="0" class="text" style="font-weight: bold; font-size: 12px;">LEYENDA</text>
    
    <rect x="0" y="15" width="40" height="25" class="entity"/>
    <text x="50" y="29" class="small-text" style="text-anchor: start;">Entidad</text>
    
    <ellipse cx="20" cy="60" rx="20" ry="12" class="key-attribute"/>
    <text x="50" y="62" class="small-text" style="text-anchor: start;">Clave Primaria</text>
    
    <ellipse cx="20" cy="90" rx="20" ry="12" class="attribute"/>
    <text x="50" y="92" class="small-text" style="text-anchor: start;">Atributo</text>
    
    <polygon points="0,110 25,100 50,110 25,120" class="relationship"/>
    <text x="60" y="112" class="small-text" style="text-anchor: start;">Relación</text>

    <text x="0" y="145" class="small-text" style="font-weight: bold; text-anchor: start;">CARDINALIDADES:</text>
    <text x="0" y="160" class="small-text" style="text-anchor: start;">1 = Uno</text>
    <text x="0" y="175" class="small-text" style="text-anchor: start;">N = Muchos</text>
    
    <text x="0" y="200" class="small-text" style="font-weight: bold; text-anchor: start;">COLORES:</text>
    <circle cx="10" cy="220" r="8" style="fill: #2563EB;"/>
    <text x="25" y="222" class="small-text" style="text-anchor: start;">Entidades</text>
    
    <circle cx="10" cy="240" r="8" style="fill: #DB2777;"/>
    <text x="25" y="242" class="small-text" style="text-anchor: start;">Relaciones</text>
    
    <circle cx="10" cy="260" r="8" style="fill: #16A34A;"/>
    <text x="25" y="262" class="small-text" style="text-anchor: start;">Atributos</text>
    
    <circle cx="10" cy="280" r="8" style="fill: #D97706;"/>
    <text x="25" y="282" class="small-text" style="text-anchor: start;">Claves Primarias</text>
  </g>

  <!-- Notas explicativas -->
  <g transform="translate(1050, 400)">
    <text x="0" y="0" class="text" style="font-weight: bold; font-size: 11px;">NOTAS DEL MODELO:</text>
    
    <text x="0" y="20" class="tiny-text" style="text-anchor: start;">• BARRIOS es la entidad central</text>
    <text x="0" y="35" class="tiny-text" style="text-anchor: start;">• Múltiples perspectivas de análisis</text>
    <text x="0" y="50" class="tiny-text" style="text-anchor: start;">• Datos urbanos y costeros</text>
    <text x="0" y="65" class="tiny-text" style="text-anchor: start;">• Impacto cultural documentado</text>
    <text x="0" y="80" class="tiny-text" style="text-anchor: start;">• Sistema de chat integrado</text>
    
    <text x="0" y="110" class="text" style="font-weight: bold; font-size: 11px;">CARACTERÍSTICAS:</text>
    <text x="0" y="130" class="tiny-text" style="text-anchor: start;">• 11 entidades independientes</text>
    <text x="0" y="145" class="tiny-text" style="text-anchor: start;">• Algunas entidades no relacionadas</text>
    <text x="0" y="160" class="tiny-text" style="text-anchor: start;">  directamente (análisis separados)</text>
    <text x="0" y="175" class="tiny-text" style="text-anchor: start;">• Modelo híbrido: relacional +</text>
    <text x="0" y="190" class="tiny-text" style="text-anchor: start;">  datos independientes</text>
  </g>

  <!-- Indicadores de áreas temáticas -->
  <rect x="70" y="70" width="600" height="100" fill="none" stroke="#3B82F6" stroke-width="1" stroke-